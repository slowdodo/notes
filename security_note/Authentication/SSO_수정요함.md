# Single Sign  On
* 모든 서버의 인증을 통합하여 한번만 인증하면 다른 서버까지 인증을 대행해 주는 모델
* 한번의 시스템 인증을 통하여 여러 정보시스템에 재 인증 절차 없이 접근할 수 있는 통합 로그인 시스템


| 구분        	| 주요기술 	| 설명                                                                                                                                              	|
|-------------	|----------	|---------------------------------------------------------------------------------------------------------------------------------------------------	|
| 인증        	| PKI      	| Public Key Infrastructure<br>비대칭키이(공개키, 비밀키) 기반의 인증 및 암호화를 수행                                                                	|
|             	| 생체인식 	| 생체의 유일한 특징을 추출하여 인증을수행한다                                                                                                      	|
|             	| OTP      	| One Time Password<br>로그인 마다 세션에서 가능한 1회성 패스워드를 생성하는 시스템                                                                 	|
| 관리        	| LDAP     	| Lightweight Directory Access Protocol                                                                                                             	|
|             	| Cookie   	| 웹 서버가 웹 브라우저에 보내어 저장했다가 서버의 부가적인 요청이 있을 때 서버로 보내주는 문자열이다                                               	|
| 암호화 통신 	| SSL      	| Secure Socket Layer<br>C/S간의 보안기능을 수행하는 TCP/IP에서 수행 보안 프로토콜이다.                                                             	|
|             	| IPSec    	| IP Security Protocol<br>인터넷상에 전용선과 같이 이용 가능한 가상적인 전용 회선을 구축하여 데이터를 도청 등의 행위를 방지하기 위한 통신 규약이다. 	|

# SSO 구축모델

## Delegation(대행) Model:
![Delegation](https://dataonair.or.kr/images/know/clum/sso_040427.jpg)
* 아이디와 비밀번호를 가지고 있다가 인증요청 시 직접 Agent가 전달하여 `해당 시스템에서 직접 인증 수행`
    * SSO 에이전트에서 대상 시스템의 인증 정보(예, ID/패스워드)를 보관하고 있다가, 대상 시스템으로 전달해주는 방식(즉, 대행)
* 대상 애플리케이션의 인증 방식을 변경하기 어려울 때 사용



## Propagation(정보 전달) Model:
![Propagation](https://dataonair.or.kr/images/know/clum/model_040427.jpg)
* SSO와 개별 업무 시스템 간의 신뢰관계를 수립하여 사용자가 SSO Agent에 인증을 수행하면 이후 `토큰으로 이용하는 방식`을 사용한다.

* 통합 인증 서버(SSO 서버)에서 로그인 정보를 확인하여, 대상 시스템으로 전달할 토큰(token)을 발급 받음
* 웹 환경에서는 주로 이 방식으로 SSO 를 구현함
* 웹환경에서는 쿠키(Cookie)를 통해 토큰 정보를 전달
* 같은 도메인(서브 도메인 포함) 내에 있다면, 쿠키를 공유할 수 있으므로 One Cookie Domain SSO를 이용하여 손쉽게 SSO를 구현가능 함
* 쿠키를 이용 시에는 보안을 위해 128비트 암호화 알고리즘이나 유효시간 제한 등의 방법을 사용해야 함
* 도메인이 다른 경우(예, aaa.com, bbb.com)는 쿠키를 공유할 수 없으므로, URL 인자에 ID/패스워드를 암호화 하여 전송하여 구현 함(예, aaa.com?/login.jsp?암호화된ID패스워드 )

## One Token for All Multi Cookie Domain
![](https://dataonair.or.kr/images/know/clum/token_040427.jpg)

    모든 도메인이 하나의 토큰을 공유한다. 모든 시스템은 서로 신뢰관계를 가져야 한다. 토큰이 하나만 사용되므로, 마스터 에이전트는 사용자 인증 및 각 도메인에 대한 토큰 제공에 대해서만 수행하게 돼 에이전트들의 관리 및 구성이 매우 간단하다. 하지만 모든 도메인들이 서로 신뢰관계를 가져야 한다는 제약사항으로 인해 적용대상이 제한적이다. 일반적으로 하나의 기업에서 운영하는 다중 도메인 서비스들을 SSO로 구성할 때 많이 사용된다.

## One Token form each cookie domain & One Token for Master Agent
![](https://dataonair.or.kr/images/know/clum/domain_040427.jpg)

    마스터 에이전트와 각 도메인들이 각각 토큰을 가진다. 마스터 에이전트는 각 도메인의 에이전트들과 신뢰관계를 가지며, 각 도메인의 에이전트들 사이는 신뢰관계를 가지지 않는다. 마스터 에이전트는 각 도메인의 에이전트에게 전달할 사용자 토큰을 발행하므로, 에이전트들의 레벨이나 속성에 따라 토큰에 저장되는 사용자 정보의 양을 조절할 수 있다. 토큰이 각 도메인 별로 발행되므로, 도메인별 Replay Attack 등에 대한 취약성이 전체 시스템에 영향을 주지 않는다.


    (Message Authentication Code) 등을 포함해 데이터의 무결성을 보장해야 한다. △Replay Attack Protection: 토큰은 사용자와 대상 애플리케이션 사이에 전달되는 인증 정보이다. 일반적으로 토큰은 네트워크에 노출되며, 노출된 토큰을 사용해 다른 사용자가 인증을 받고 들어올 수 있다(Replay Attack). 특히 웹 환경에서 이러한 문제점이 중요한 이슈로 등장하고 있다. 이러한 문제점을 근본적으로 해결하기 위해서는 토큰을 네트워크에 노출시키지 않아야 한다.
    토큰을 네트워크에 노출시키지 않기 위해서는 항상 사용자와 대상 애플리케이션 사이에 암호 채널을 형성해야 하며, 이 채널을 통해 토큰을 전달해야 한다. 그러나 SSL과 같은 채널 암호를 사용하는 데에는 매우 많은 비용이 요구되어 실제로 많이 사용되고 있지는 않다.
    SSL과 같은 암호채널을 사용하지 않으면서 Replay Attack이 발생할 수 있는 상황을 줄일 수 있도록 다음과 같은 보안 기술들이 사용된다.

    △사용자 주소 제한: 토큰이 발행될 때 접속한 사용자 주소억함으르써 Token이 제출된 사용자 주소와 최초 발행시 기억된 주소를 비교하여 접속한 곳 이외에서의 접속을 제한할 수 있다. 사용자 주소가 업무진행 중에 자주 변경되지 않는 시스템일 경우 유효하다. 예를 들어 회사내의 인터넷 환경일 경우 사용될 수 있다. 인터넷 환경의 경우에는 사용자 주소가 특정 범위에서 자주 바뀔 수 있는 환경도 있기 때문에 불특정 다수를 위한 일반적인 인터넷 서비스에 사용하기에는 부적합하다.

    △유효시간 제한: 토큰의 유효시간을 매우 짧게 줌으로써 Replay Attack에 사용될 수 있는 시간을 제한한다. 유효시간내에 임계시간(예: 유효시간의 1/2)을 넘으면 자동으로 토큰을 재 발행하여 사용자는 의식하지 못하고 서비스를 계속 사용하게 한다. 지금까지 사용자가 각 애플리케이션별로 별도의 인증을 받지 않고, 한번의 통합 인증만으로 각 애플리케이션들을 사용할 수 있도록 하는 SSO 기술에 대해 살펴보았다. 대상 애플리케이션의 수정을 최소화할 수 있는 Delegation 모델과 토큰을 생성해 통합 인증 서비스를 제공하는 Propagation 모델 그리고 양자의 장점을 조합한 Delegation & Propagation 방식을 이해한다면 현재 도입 대상 기업의 IT 인프라와 진행중인 서비스 및 애플리케이션의 특성에 적합한 EAM 시스템 도입을 결정하는데 도움이 될 것이다.