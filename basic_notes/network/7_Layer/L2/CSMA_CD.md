# CSMA/CD(Carrier Sense Multiple Access with Collision Detection)<br> 반송파 감지 다중 접속 및 충돌 탐지

* 이더넷에 연결된 여러 컴퓨터들이 하나의 전송 매체를 공유할 수 있도록 해주는 기술
* 호스트가 채널의 상태를 감지하여 충돌을 회피하는 네트워킹

### 특징
  * 충돌에 따른 해결책 (이더넷 )
     * 충돌을 탐지하면 재전송하기 전에 무작위 시간 만큼 기다림
        *  여기서, 무작위 시간은 균등확률분포로부터 선택됨  -> 이진지수백오프 참조
     * 만일 충돌이 계속 일어나면, 매번 2배 씩 기다리는 시간이 늘어남
     * 재전송 시도수 한계는 `16번 시도후 포기`

* 제어의 주체
  * CSMA/CD의 핵심은 네트워크에 대한 제어가 어떤 중앙제어장치에 의해 제어되는 것
       <br/>이 아니라, 제어권한이 네트워크에 연결된 모든 노드들에 분산되어 이루어짐

* 채널 이용률
  * CSMA/CD는 채널의 전체 이용률이 비교적 낮을 때(30% 이하) 최적의 상태로 동작


# 3가지 제어 방식
### Non-persistent
* 매체가 사용 중이 아니면 즉시 전송
* 매체가 사용 중이면, 확률분포에서 구한 재전송 지연시간만큼 기다림
* 임의 지연( random delay) 사용은 충돌확률을 감소
* 그러나, 매체가 비었을 때 임의 지연 때문에 데이터 전송이 없는 채널 휴지 발생
### 1-persistent
* 매체가 사용 중이 아니면 즉시 전송
* 매체가 사용 중이면 기다렸다가 채널이 비는 순간 즉시 전송
* 채널 휴지 시간을 제거하기 위해 사용
* 임의 지연이 없이게 채널 휴지는 거의 없지만 충돌 확률이 높음
### p-persistent
* 매체가 사용 중이 아니라면, 확률 p로 전송하고 (1-p)의 확률로 하나의 시간단위를 지연시킨다.
* 매체가 사용 중이면 기다렸다가 채널이 비는 순간 확률 p로 전송하고 확률 (1-p)로 대기
* 위 장단점을 상호 보완하기 위한 방법

### 작동순서
1. 네트워크를 사용하려는 컴퓨터는 먼저 현재 네트워크 위에 흐르고 있는 데이터가 있는지를 감지한다.
2. 만약 현재 다른 데이터가 전송 중이면 사용할 수 있을 때까지 기다리고 아니면 전송을 시작한다.
3. 여러 군데에서 동시에 전송을 시작해 충돌이 발생하면 최소 패킷 시간 동안 전송을 계속해, 다른 컴퓨터가 충돌을 탐지할 수 있도록 한다.
4. 그 뒤, 임의 시간 동안 기다린 뒤에 다시 신호(반송파)를 감지하고, 네트워크 사용자가 없으면 전송을 다시 시작한다.
5. 전송을 마치면, 상위 계층에 전송이 끝났음을 알리고 끝마친다.
6. 여러 번 다시 시도했음에도 전송에 실패하면 이를 상위 계층에 알리고 끝마친다.
오늘날에는 대부분 이더넷 스위치를 사용하여 스위치 방식의 네트워크(switched network)를 구성하는데, 이 경우 충돌이 일어나지 않는다.


