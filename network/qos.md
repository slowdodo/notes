QoS(Quality of Service) 소개
QoS(Quality of Service)는 트래픽을 생성하는 애플리케이션의 필수 동작에 맞게 라우터나 스위치 같은 네트워크 디바이스가 해당 트래픽을 전달할 수 있도록 트래픽을 조작하는 것입니다. 다시 말해, QoS는 네트워크 디바이스가 트래픽을 구별한 후에 트래픽에 서로 다른 동작을 적용할 수 있도록 해줍니다.

QoS가 해결하는 문제
과거에는 음성 및 데이터 트래픽을 전달하기 위해 별개의 물리적 네트워크를 사용했습니다. 각 네트워크는 특정 유형의 트래픽을 전달했고 해당 트래픽에 필요한 내재된 품질 수준을 제공했습니다. 오늘날에는 트래픽이 공통 인프라 및 네트워크 리소스를 공유하는 융합된 패킷 기반 네트워크에서 동일한 애플리케이션이 실행됩니다. 이러한 패킷 기반 네트워크는 최상의 방식으로 트래픽을 전달하기 위한 것입니다. 따라서 내재된 QoS가 없습니다.

하지만 음성 및 비디오 서비스의 가입자들은 해당 서비스가 언제나 용납되는 수준 이상의 품질로 제공되기를 요구합니다. 패킷 기반 네트워크는 포인트 A에서 포인트 B로 대량의 트래픽을 전달하며, 이때 트래픽을 생성하는 모든 애플리케이션의 서비스 계약 및 성능 요구 사항에 맞춰 전달합니다. 이것이 가능한 것은 QoS를 사용하기 때문입니다.

QoS가 제공하는 기능
QoS는 기본적으로 오늘날의 패킷 기반 네트워크에서 트래픽을 관리하기 위한 것이며 다음과 같은 기능을 포함합니다.

프로토콜, 주소 및 포트 번호를 기준으로 트래픽 간의 우선 순위를 정합니다.
수신 또는 송신 시 트래픽을 필터링합니다.
디바이스에서 전송 또는 수신이 허용되는 대역폭을 제어합니다.
패킷 헤더에서 QoS 동작 요구 사항을 읽고 씁니다.
디바이스가 스케줄러 우선 순위를 기준으로 가장 높은 우선 순위의 트래픽을 보내도록 정체를 제어합니다.
디바이스가 어떤 패킷을 삭제하거나 처리해야 하는지를 알 수 있도록 RED(Random Early Detection) 알고리즘을 사용하여 패킷 손실을 제어합니다.
Network Device
QoS 작동 방식
라우터나 스위치 같은 네트워크 디바이스는 다음과 같이 트래픽을 구별합니다.

수신 인터페이스에서 패킷을 수신하고, 패킷을 검사하며 CoS(Classes of Service)라는 그룹으로 트래픽을 분류합니다.
옵션인 폴리서가 구성된 경우에는 트래픽을 제한하거나 다른 클래스에 할당합니다.
대기열에는 전송 리소스를 기다리고 있는 패킷이 보관됩니다.
스케줄러는 패킷을 대기열에서 꺼내 스케줄러에 구성된 순서대로 전송합니다.
셰이퍼가 구성된 경우 트래픽을 구성된 셰이핑 속도에 맞춰 트래픽을 셰이핑합니다.
설명이 구성된 경우, 패킷을 수신할 다음 디바이스에서 분류 방법을 파악할 수 있도록 디바이스가 IP 헤더의 DS 필드의 값을 설명합니다.
주니퍼 네트웍스 구현
Junos OS를 실행하는 주니퍼 네트웍스 디바이스는 앞서 언급된 모든 QoS 동작을 제공합니다. 더구나 Junos OS CoS(Class of Service) 소프트웨어 구조를 통해 제공합니다. QoS 동작을 매우 세부적으로 적용할 수 있는 메커니즘을 제공하는 Junos OS CoS 기능 집합은 오늘날 가장 유연한 QoS 솔루션 중 하나입니다.