# netstat 

    UNIX 시스템의 TCP/IP 프로토콜 진단 시 다양한 용도로 사용하는 도구
    LAN에 대한 성능, 시스템의 라우팅 정보, 소켓 사용정보 등 지정 옵션에 따라 네트워크 정보를 제공

# 주요 입력 문법

* 옵션
    * -r : 라우팅 정보를 출력
    * -i : 네트워크 인터페이스에 대한 정보를 출력
    * -s : 각 네트워크 프로토콜(IP, TCP, UDP, ICMP)에 대한 통계 정보를 출력
    * -a : 모든 소켓 정보를 출력
    * -n : 네트워크 주소를 숫자로 나타냄
    * -t : tcp 프로토콜
    * -u : udp 프로토콜
    * -p : 프로토콜 사용 프로세스 ID 노출
    * -c : 초단위로 보여줌

# 자주 사용하면 명령어 조합

## 현재 연결된 모든 네트워크 연결 상태 확인
```bash
netstat -an
```
## 

# netstat option

대표적 필드의 내용

|항목|내용|
|---|---|
|Proto|	사용중인 프로토콜을 표시해주는 필드입니다. ( ex. tcp/udp )|
|Recv-Q|원격 응용 프로그램을 연결하기 위해 사용한 프로토콜의 종류|
|Send-Q|원격 응용 프로그램으로 전송하기 위해 송신 버퍼에 저장한 데이터 크기|
|Local Address|	로컬 주소 표시 필드|
|Foreign Address|	상대편 주소 표시 필드|
|state|	현재 연결의 상태를 표시해 주는 필드입니다.|

3-way handshake state 값
|항목|내용|
|---|---|
|LISTEN|	연결이 가능하도록 관련 데몬이 떠있으며 연결이 가능함을 의미합니다.|
|SYN-SENT|	연결을 요청한 상태를 의미합니다.|
|SYN_RECEIVED	|연결요구에 의한 응답을 준 후에 확인메시지를 기다리고 있는 상태를 의미.|
|ESTABLISHED|	위의 3단계 연결과정이 모두 종료된 후에 연결이 완료된 상태를 의미.|

4-way handshake state 값

|항목|내용|
|---|---|
|FIN-WAIT1| 한쪽 응용 프로그램이 연결 종료를 요청한 상태|
|CLOSE-WAIT| 원결 종료 메시지를 수신하고 그에 대한 확인 메시지를 보낸 상태|
|FIN-WAIT2| 로컬에서 종결 메시지를 전송하고 원격 호스트로부터 이에 대한 확인 메시지를 수신하였지만, 원격 응용 프로그램이 작업을 종료하지 않아 원격 호스트의 종결 메시지를 기다리는 상태|
|LAST-ACK|원격으로부터 종결 요청을 받고 로컬에서도 회선 종결에 합의한 상태, 이에대한 확인 메시지가 수신되면 회선연결 종료|
|TIME-WAIT|연결은 종료됐지만 마즈막 종료 확인 메시지를 재전송할 경우를 감안하여 당분간 소켓정보 유지|
|CLOSE|완전 연결을 종료한 상태|

# 여담

현재 사용중인 포트 확인할꺼면 걍 아래 커멘드를 쓰는게 좋다

```bash
nmap localhost
```